<html><body><p>Week-11</p><p>1. Using h2 database</p><p>Project name: h2db</p><p>Author.java</p><p>package com.example.mysqldemo;</p><p></p><p>public class Author {</p><p>private String firstName;</p><p>private String lastName;</p><p>public String getFirstName() {</p><p>return firstName;</p><p>}</p><p>public void setFirstName(String firstName) {</p><p>this.firstName = firstName;</p><p>}</p><p>public String getLastName() {</p><p>return lastName;</p><p>}</p><p>public void setLastName(String lastName) {</p><p>this.lastName = lastName;</p><p>}</p><p>public Author(String firstName, String lastName) {</p><p>super();</p><p>this.firstName = firstName;</p><p>this.lastName = lastName;</p><p>}</p><p>}</p><p></p><p>AuthorService</p><p>package com.example.mysqldemo;</p><p>import java.util.ArrayList;</p><p>import java.util.*;</p><p>import org.slf4j.*;</p><p>import org.springframework.beans.factory.annotation.Autowired;</p><p>import org.springframework.jdbc.core.JdbcTemplate;</p><p>import org.springframework.stereotype.Service;</p><p>import jakarta.annotation.PostConstruct; </p><p></p><p></p><p>@Service</p><p>public class AuthorService {</p><p>private static final Logger log =LoggerFactory.getLogger(AuthorService.class);</p><p>@Autowired</p><p>JdbcTemplate jdbcTemplate;</p><p>@PostConstruct</p><p>public void postConstruct() {</p><p>	Author author1=new Author("Manogna","IT");</p><p>	Author author2=new Author("Varshini","CSE");</p><p>	List <Author> authors = new ArrayList<>();</p><p>	authors.add(author1);</p><p>	authors.add(author2);</p><p>log.info("Creating tables");</p><p>	jdbcTemplate.execute("DROP TABLE IF EXISTS author");</p><p>	jdbcTemplate.execute("CREATE TABLE author(" + " first_name varchar(255), last_name varchar(255))");</p><p>authors.forEach(i->jdbcTemplate.update("INSERT INTO author(first_name, last_name) VALUES (?,?)",i.getFirstName(),i.getLastName()));</p><p>log.info("Records Saved");</p><p>//retrieve saved records.</p><p>log.info("Retrieving records");</p><p>authors = jdbcTemplate.query("select * from author", (rs, rowNum)-> new Author(rs.getString("first_name"),rs.getString("last_name")));</p><p>authors.forEach(i -> log.info(i.getFirstName() + " " +i.getLastName()));</p><p>}</p><p>} </p><p></p><p>Application.properties:</p><p>server.port=83</p><p>spring.application.name=h2db</p><p></p><p># H2 console</p><p>spring.h2.console.enabled=true</p><p>spring.h2.console.path=/h2-console</p><p></p><p># Datasource Settings</p><p>spring.datasource.url=jdbc:h2:mem:testdb</p><p>spring.datasource.driverClassName=org.h2.Driver</p><p>spring.datasource.username=sa</p><p>spring.datasource.password=</p><p></p><p>spring.jpa.hibernate.ddl-auto=none</p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p>JDBC with MySQL:</p><p></p><p>Employee.java</p><p>package com.example.demo;</p><p></p><p>import jakarta.persistence.Entity;</p><p>import jakarta.persistence.Id;</p><p></p><p>@Entity</p><p>public class Employee {</p><p></p><p>    @Id</p><p>    private int id;</p><p>    private String name;</p><p>    private String department;</p><p></p><p>    public Employee() {}</p><p></p><p>    public Employee(int id, String name, String department) {</p><p>        this.id = id;</p><p>        this.name = name;</p><p>        this.department = department;</p><p>    }</p><p></p><p>    public int getId() { return id; }</p><p>    public void setId(int id) { this.id = id; }</p><p></p><p>    public String getName() { return name; }</p><p>    public void setName(String name) { this.name = name; }</p><p></p><p>    public String getDepartment() { return department; }</p><p>    public void setDepartment(String department) { this.department = department; }</p><p>}</p><p></p><p></p><p>EmployeeRepository.java</p><p>package com.example.demo;</p><p></p><p>import org.springframework.data.jpa.repository.JpaRepository;</p><p></p><p>public interface EmployeeRepository extends JpaRepository<Employee, Integer> { }</p><p></p><p>MysqlJdbcDemoApplication.java</p><p>package com.example.demo;</p><p></p><p>import org.springframework.boot.SpringApplication;</p><p>import org.springframework.boot.autoconfigure.SpringBootApplication;</p><p></p><p>@SpringBootApplication</p><p>public class MysqlJdbcDemoApplication {</p><p>    public static void main(String[] args) {</p><p>        SpringApplication.run(MysqlJdbcDemoApplication.class, args);</p><p>        System.out.println("welcome");</p><p>    }</p><p>}</p><p></p><p></p><p>Applications.properties</p><p>spring.application.name=MysqlJdbcDemo</p><p>server.port=85</p><p></p><p>spring.datasource.url=jdbc:mysql://localhost:3306/employee_db?useSSL=false&serverTimezone=UTC</p><p>spring.datasource.username=root</p><p>spring.datasource.password=</p><p></p><p>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</p><p></p><p>spring.jpa.hibernate.ddl-auto=none</p><p>spring.jpa.show-sql=true</p><p></p><p>spring.sql.init.mode=always</p><p>spring.jpa.defer-datasource-initialization=true</p><p></p><p>DATABASE</p><p></p><p>Create database employee_db;</p><p>Use employee_db;</p><p>CREATE TABLE IF NOT EXISTS employee (</p><p>    id INT PRIMARY KEY,</p><p>    name VARCHAR(255),</p><p>    department VARCHAR(255)</p><p></p><p>);</p><p></p><p>data.sql</p><p>INSERT INTO employee (id, name, department) VALUES</p><p>(1, 'Manogna', 'IT'),</p><p>(2, 'Keerthiâ€™, 'CSE'),</p><p>(3, 'Sai', 'ECE');</p><p>Pom.xml

<?xml version="1.0" encoding="UTF-8"?></p><p><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</p><p>	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"></p><p>	<modelVersion>4.0.0</modelVersion></p><p>	<parent></p><p>		<groupId>org.springframework.boot</groupId></p><p>		<artifactId>spring-boot-starter-parent</artifactId></p><p>		<version>3.5.7</version></p><p>		<relativePath/> <!-- lookup parent from repository --></p><p>	</parent></p><p>	<groupId>com.example</groupId></p><p>	<artifactId>MysqlJdbcDemo</artifactId></p><p>	<version>0.0.1-SNAPSHOT</version></p><p>	<name>MysqlJdbcDemo</name></p><p>	<description>Servlet + HttpSession + JPA + H2 demo</description></p><p>	<url/></p><p>	<licenses></p><p>		<license/></p><p>	</licenses></p><p>	<developers></p><p>		<developer/></p><p>	</developers></p><p>	<scm></p><p>		<connection/></p><p>		<developerConnection/></p><p>		<tag/></p><p>		<url/></p><p>	</scm></p><p>	<properties></p><p>		<java.version>17</java.version></p><p>	</properties></p><p>	<dependencies></p><p>		<dependency></p><p>			<groupId>org.springframework.boot</groupId></p><p>			<artifactId>spring-boot-starter-data-jdbc</artifactId></p><p>		</dependency></p><p>		<dependency></p><p>			<groupId>org.springframework.boot</groupId></p><p>			<artifactId>spring-boot-starter-web</artifactId></p><p>		</dependency></p><p></p><p><dependency></p><p>    <groupId>mysql</groupId></p><p>    <artifactId>mysql-connector-java</artifactId></p><p>    <version>5.1.49</version></p><p></dependency></p><p></p><p></p><p>		<dependency></p><p>			<groupId>com.mysql</groupId></p><p>			<artifactId>mysql-connector-j</artifactId></p><p>			<scope>runtime</scope></p><p>		</dependency></p><p>		<dependency></p><p>			<groupId>org.springframework.boot</groupId></p><p>			<artifactId>spring-boot-starter-test</artifactId></p><p>			<scope>test</scope></p><p>		</dependency></p><p>	</dependencies></p><p></p><p>	<build></p><p>		<plugins></p><p>			<plugin></p><p>				<groupId>org.springframework.boot</groupId></p><p>				<artifactId>spring-boot-maven-plugin</artifactId></p><p>			</plugin></p><p>		</plugins></p><p>	</build></p><p></p><p></project></p><p></p><p></p><p>http://localhost:85/employees</p><p></p><p>Output:</p><p></p><p></p><p></p><img src="image3.png" style="max-width:100%; margin-top:10px;"><img src="image2.png" style="max-width:100%; margin-top:10px;"><img src="image6.png" style="max-width:100%; margin-top:10px;"><img src="image1.png" style="max-width:100%; margin-top:10px;"><img src="image5.png" style="max-width:100%; margin-top:10px;"><img src="image4.png" style="max-width:100%; margin-top:10px;"></body></html>